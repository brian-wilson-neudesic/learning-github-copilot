
# Hands-On Lab: Testing with GitHub Copilot

## Overview

**Goal:**  
By the end of this session, you will learn how you can use GitHub Copilot Edits (preview) and other features to enhance test projects by creating new unit and integration test cases.  
You will create unit tests for the BasketItem class in the Basket.UnitTests, as well as cover additional scenario in Catalog.FunctionalTests projects.

By the end of this lab, you will have enhanced two test projects in the solution and gained practical experience with Copilot Edits (preview) and other features.

**Estimated Duration:**  
30-45 minutes

**Audience:**  
Developers, QA testers, DevOps engineers, and Technical Writers.  

**Prerequisites:**  

- Completed [Lesson 1: Installing and Configuring GitHub Copilot](docs/lesson1.md), or
- Access to GitHub Copilot (subscription),
- Visual Studio Code,
- GitHub Copilot extension to VS Code.

---

## Table of Contents

1. [Lab Objectives](#lab-objectives)
2. [Environment Setup](#environment-setup)
3. [Walkthrough](#walkthrough)
    - [Step 1: Generating Unit Tests](#step-1-generating-unit-tests)
    - [Step 2: Working with Integration Tests](#step-2-working-with-integration-tests)
4. [Troubleshooting](#troubleshooting)
5. [Conclusion](#conclusion)

---

## Lab Objectives
  
- Understand how to leverage GitHub Copilot to generate and execute unit and integration tests.  
- Learn how incremental test improvements can be achieved.  

---

## Environment Setup

### Tools and Resources

- GitHub Copilot enabled on your GitHub account.
- Visual Studio Code with GitHub Copilot extension installed.
- Code repository for the lab: [GitHub Copilot](https://github.com/neudesic/learning-github-copilot).

### Steps to Prepare

1. Clone the repository:  

   ```bash
   git clone https://github.com/neudesic/learning-github-copilot.git
   cd learning-github-copilot/samples/eShop
   ```

2. Open the project in your IDE:  

   ```bash
   code .
   ```

---

## Walkthrough

### Step 1: Generating Unit Tests

**Description:**  
In this step, you will create a new unit tests class with some simple test cases for BasketItem class.  

**Instructions:**  

 1. In VS Code, open file **src/Basket.API/Model/BasketItem.cs**
 2. Open Copilot Edits by pressing Ctrl-Shift-I.
 3. Verify **BasketItem.cs** file is included in the Working Set, and click + add **Basket.UnitTests.csproj** file.  
 4. Ensure model **o1-mini (Preview)** is selected (right corner of the Copilot Edits command bar down below).
 5. Enter following request `Generate unit tests for BasketItem methods and save in the Basket.UnitTests.csproj. Include edge cases.` and press Enter.  
In a few moments, unit tests code will be generated in a new file **BasketItemTests.cs** that will show as unsaved file in the editor..
 6. Observe the generated code.
 7. (Optional) If you find that further improvements can be made, you can ask Copilot Edits and iterate prompting until desired qualities are met.  
 8. Click **Accept** to accept the generated code.  
 9. Save the file. (If asked to confirm you want to save code generated by GitHub Copilot, confirm).  
10. At the Terminal prompt navigate to the Basket.UnitTests project and run the tests:

      ```plaintext
      cd tests/Basket.UnitTests
      dotnet test
      ```

11. Click **Done** to complete Copilot Edits session.

**Expected Outcome:**  
The existing and new unit tests should pass. If some test cases fail, you can use GitHub Copilot to fix the code or the failing unit tests.  

**NOTE**:  Generated code may not be correct as GitHub Copilot context grasp is limited and may use incorrect assumptions.  In general, it will correctly identify the testing framework for the project.  
Use your skills and GitHub Copilot to resolve the issue by varying your prompts and focus in an iterative manner.  

---

### Step 2: Working with Integration Tests

**Description:**  
In this step, you will work with GitHub Copilot to add a test case to the existing Catalog.API integration tests suite.  

**Instructions:**  

1. In VS Code, open file **tests/Catalog.FunctionalTests/CatalogApiTests.cs**
2. Open Copilot Edits by pressing Ctrl-Shift-I.
3. Verify **CatalogApiTests.cs** file is included in the Working Set
4. Ensure model **o1-mini (Preview)** is selected (right corner of the Copilot Edits command bar down below).
5. In the **CatalogApiTests.cs** file, scroll down and select test case *GetCatalogItemWithId()*.
6. In Copilot Edits prompt field, enter `Consider selected test case. It expects record with the given id. Can you make a test case where no item is returned with the given id?` and press Enter.  
In a few moments, the requested tests case will be generated in **CatalogApiTests.cs**.  
7. Observe the generated code. The changes are highlighted.  
8. (Optional) You may further ask about reasoning why no items will be returned, which can lead into discussion on where 400 or 404 is more appropriate!  
9. Click **Accept** to accept the generated code.  
10. Save the changes made to the file.
11. At the Terminal prompt navigate to the Catalog.FunctionalTests project and run the tests:

      ```plaintext
      cd tests/Catalog.FunctionalTests
      dotnet test
      ```

12. Click **Done** to complete Copilot Edits session.

**Expected Outcome:**  
The existing and new test case should pass.  This being integration tests, it may take a few moments for test run to complete. If some test cases fail, you can use GitHub Copilot to fix the code or the failing unit tests.  

**NOTE**:  Generated code may not be correct as GitHub Copilot context grasp is limited and may use incorrect assumptions.  In general, it will correctly identify the testing framework for the project.  
Use your skills and GitHub Copilot to resolve the issue by varying your prompts and focus in an iterative manner.  

**NOTE**:  Generated code may not be correct as GitHub Copilot context grasp is limited and may use incorrect assumptions.  In general, it will correctly identify the testing framework and mocking library for the project.  
Use your skills and GitHub Copilot to resolve the issue by varying your prompts and focus in an iterative manner.  

---

## Troubleshooting

- **Suggested command/script fails:** GitHub Copilot is great, but is not perfect.  
  **Solution:**  Use your skills and GitHub Copilot to help resolve the issue in an iterative manner. This is extra challenge and learning opportunity!

---

## Conclusion

**Summary:**  
In this lab you should have learned and gained practical experience with Copilot Edits (preview) and other features you can use with different types of testing cases.  

**Next Steps:**  

- [Lesson 4: Creating Documentation with GitHub Copilot](4-creating-documentation-with-copilot.md)

---
